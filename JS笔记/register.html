<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
</head>
<style>
    div{
        text-align:center;
    }
    div p{
        font-size: 26px;
        text-align:center;
        color:#33b915;
    }
    div input{
        outline:none;
        border-radius: 25px;
        width:255px;
        height: 25px;
        margin-bottom: 7px;
        border: 1px solid #cccccc;
        font-size: 15px;
    }
    #check{
        width:initial;
        height:initial;
    }
    #submit{
        width: 200px;
        height: 40px;
        color: #fff;
        font-size: 18px;
        background-color:#33b915;
    }
    span{
        display:inline-block;
        width:200px;
        text-align: right;
    }
    .prompt{
        width: 0px;
    }
    #infoUserName,#infoPsd,#infoSecPsd,#infoPhNum,#infoVerCode{
        width: 295px;
    }
    #text{
        margin-left: 100px;
    }
    #title{
        margin-left: 45px;
    }
</style>
<script>
    window.onload = init;
    //用户名，密码，二次密码，手机号码，用户输入验证码，提交按钮，系统给定验证码
    var userName,psd,secPsd,phNum,userVerCode,submit,sysVerCode;
    //信息提示：用户名，密码，二次密码，验证码，电话号码
    var infoUserName,infoPsd,infoSecPsd,infoVerCode,infoPhNum;
    function init(){
        userName = document.getElementById("userName");
        psd = document.getElementById("psd");
        secPsd = document.getElementById("secPsd");
        phNum = document.getElementById("phNum");
        userVerCode = document.getElementById("userVerCode");
        submit = document.getElementById("submit");
        sysVerCode = document.getElementById("sysVerCode");

        infoUserName = document.getElementById("infoUserName");
        infoPsd = document.getElementById("infoPsd");
        infoSecPsd = document.getElementById("infoSecPsd");
        infoPhNum = document.getElementById("infoPhNum");
        infoVerCode = document.getElementById("infoVerCode");

        userName.onfocus = checkUserName;
        userName.onblur = checkUserName; 

        psd.onfocus = checkPsd;
        psd.onblur  = checkPsd;

        secPsd.onfocus = checkSecPsd;
        secPsd.onblur  = checkSecPsd;

        phNum.onfocus = checkPhNum;
        phNum.onblur  = checkPhNum;

        userVerCode.onfocus = showVerCode;
        sysVerCode.onclick  = showVerCode;

        userVerCode.onblur = checkVerCode;

        submit.onclick = checkAll;
    }
    //合法字符字典
    var dict = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890.-_";
    var dictAlpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    var dictNum = "1234567890";
    //判断一个字符串是否包含特殊字符
    //str:需要判断的字符串  返回值：若包含，返回true,否则返回false
    //自己写，暂时不允许使用正则表达式
    //str:Hyper@1314
    function hasIllegalChar(str){
        for(var i = 0;i < str.length;i++)
        {
            if(dict.indexOf(str.charAt(i)) == -1)
            {
                return true;
            }
        }
        return false;
    }
    // 验证str是否只有字母+数字
    // 
    // 

function isAlphaAndNum(str){
    var flagSpecial,flagAlpha,flagNum;
    for(var i = 0; i<str.length; i++){
        if(dict.indexOf(str.charAt(i)) == -1)
        {
            flagSpecial = 1;
            return false;
        }
        if(dictAlpha.indexOf(str.charAt(i)) != -1)
        {
            flagAlpha = 1;
        }
        if(dictNum.indexOf(str.charAt(i)) != -1){
            flagNum = 1;
        }
    }
    if(flagAlpha == 1 && flagNum == 1){
        return true;
    }else{
        return false;
    }
}
    //用于验证用户名输入是否正确，若正确，则提示信息为绿色，若错误，则获取焦点提示蓝色，失去焦点提示红色
    //1.长度为0 2.长度不在6-18之间 3.包含了特殊字符(字母、数字._-以外的字符) 4.数字打头  5.特殊字符打头（.-_）
    //6.用户名已注册（+5分） 7.敏感词汇(+5分)
    function checkUserName(){
        var str = userName.value; 
        // 提示颜色
        if(event.type == "focus")
        {
            infoUserName.style.color = "blue";    
        }else{
            infoUserName.style.color = "red";
        }
        // 判定处理
        if(str.length == 0)
        {
            infoUserName.innerHTML ="<img src='images/onError.gif'>"+"用户名不能为空";
                        
        }else   if(str.length < 6 || str.length > 18)
                {
                    infoUserName.innerHTML ="<img src='images/onError.gif'>"+"用户名长度不在6~18之间";
                }else   if(Number(str.charAt(0))){
                            infoUserName.innerHTML ="<img src='images/onError.gif'>"+"不能以数字打头";
                        }else   if(str.charAt(0) == "_" || str.charAt(0) == "-" || str.charAt(0) == "."){
                                    infoUserName.innerHTML ="<img src='images/onError.gif'>"+"不能以特殊字符打头";
                                }else   if(hasIllegalChar(str) == true)
                                        {
                                            infoUserName.innerHTML ="<img src='images/onError.gif'>"+"不能包含特殊字符";        
                                        }else{
                                            infoUserName.innerHTML ="<img src='images/right.jpg'>"+"恭喜您，可以注册";
                                            infoUserName.style.color = "green";
                                        }
    }
    //用于验证密码输入是否正确，若正确，则提示信息为绿色，若错误，则获取焦点提示蓝色，失去焦点提示红色
    function checkPsd(){
        var str = psd.value;
    // 提示颜色
        if(event.type == "focus")
        {
            infoPsd.style.color = "blue";
        }else{
            infoPsd.style.color = "red";
        }
    // 判定处理
    if(str.length == 0)
        {
            infoPsd.innerHTML ="<img src='images/onError.gif'>"+"密码不能为空";
                        
        }else   if(str.length < 6 || str.length > 18)
                {
                    infoPsd.innerHTML ="<img src='images/onError.gif'>"+"密码长度不在6~18之间";
                }else   if(Number(str.charAt(0))){
                    infoPsd.innerHTML ="<img src='images/onError.gif'>"+"不能以数字打头";
                        }else   if(str.charAt(0) == "_" || str.charAt(0) == "-" || str.charAt(0) == "."){
                            infoPsd.innerHTML ="<img src='images/onError.gif'>"+"不能以特殊字符打头";
                                }else   if(isAlphaAndNum(str) == true)
                                        {
                                            infoPsd.innerHTML ="<img src='images/onError.gif'>"+"不能包含特殊字符";        
                                        }else{
                                            infoPsd.innerHTML ="<img src='images/right.jpg'>"+"恭喜您，可以注册";
                                            infoUserName.style.color = "green";
                                        }
        
    }
    //用于验证二次密码输入是否正确，若正确，则提示信息为绿色，若错误，则获取焦点提示蓝色，失去焦点提示红色
    function checkSecPsd(){

    }
    //用于验证手机号码输入是否正确，若正确，则提示信息为绿色，若错误，则获取焦点提示蓝色，失去焦点提示红色
    function checkPhNum(){

    }
    //产生新的验证码，随机的字母+数字的格式
    //图片类验证码，5分，微信二维码或短信验证码10分
    function showVerCode(){

    }
    //用于验证用户输入验证码是否与系统给定验证码相同，若正确，则提示信息为绿色，若错误，则提示红色
    function checkVerCode(){

    }
    //用于提交注册信息时，验证所有信息是否均正确，若正确，转入welcome.html，否则清空文本框内容
    function checkAll(){
        
    }
</script>
<body>
    <div>
        <div id="title">
            <p>
                欢&nbsp;&nbsp;迎&nbsp;&nbsp;注&nbsp;&nbsp;册&nbsp;&nbsp;！
            </p>
        </div>
        <form>
            <div id="text">
                <span>用 户 名：</span><input type="text" id="userName"><span class="prompt">@tom.com</span><span id="infoUserName"></span><br>
                <span>密&nbsp;&nbsp;&nbsp;码：</span><input type="password" id="psd"><span id="infoPsd"></span><br>
                <span>确认密码：</span><input  type="password" id="secPsd"><span id="infoSecPsd"></span><br>
                <span>手机号码：</span><input  type="text" id="phNum"><span id="infoPhNum"></span><br>
                <span>验 证 码：</span><input  type="text" id="userVerCode"><span id="sysVerCode" class="prompt">1A5X</span><span id="infoVerCode"></span><br>
            </div> 
            <div>
                <input type="checkbox" id="check"><span>我已阅读并接受服务条款</span><br>
                <input type="submit" value="注册" id="submit">
            </div>
        </form>
    </div>  
</body>
</html>