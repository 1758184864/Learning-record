(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-960b6b80"],{"6ab0":function(t,e,s){"use strict";s("99af");var a=s("b775"),n="/admin/process/processType";e["a"]={getPageList:function(t,e){return Object(a["a"])({url:"".concat(n,"/").concat(t,"/").concat(e),method:"get"})},getById:function(t){return Object(a["a"])({url:"".concat(n,"/get/").concat(t),method:"get"})},save:function(t){return Object(a["a"])({url:"".concat(n,"/save"),method:"post",data:t})},updateById:function(t){return Object(a["a"])({url:"".concat(n,"/update"),method:"put",data:t})},removeById:function(t){return Object(a["a"])({url:"".concat(n,"/remove/").concat(t),method:"delete"})},findAll:function(){return Object(a["a"])({url:"".concat(n,"/findAll"),method:"get"})}}},9591:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("el-steps",{attrs:{active:t.stepIndex,"finish-status":"success"}},[s("el-step",{attrs:{title:"基本设置"}}),s("el-step",{attrs:{title:"表单设置"}}),s("el-step",{attrs:{title:"流程设置"}})],1),s("div",{staticClass:"tools-div"},[t.stepIndex>1?s("el-button",{attrs:{icon:"el-icon-check",type:"primary",size:"small",round:""},on:{click:function(e){return t.pre()}}},[t._v("上一步 ")]):t._e(),s("el-button",{attrs:{icon:"el-icon-check",type:"primary",size:"small",round:""},on:{click:function(e){return t.next()}}},[t._v(t._s(3==t.stepIndex?"提交保存":"下一步")+" ")]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.back()}}},[t._v("返回")]),3===t.stepIndex?s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.openNewWindow}},[t._v("进行流程设计")]):t._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.stepIndex,expression:"stepIndex == 1"}],staticStyle:{"margin-top":"20px"}},[s("el-form",{ref:"flashPromotionForm",staticStyle:{"padding-right":"40px"},attrs:{"label-width":"150px",size:"small"}},[s("el-form-item",{attrs:{label:"审批类型"}},[s("el-select",{attrs:{placeholder:"请选择审批类型"},model:{value:t.processTemplate.processTypeId,callback:function(e){t.$set(t.processTemplate,"processTypeId",e)},expression:"processTemplate.processTypeId"}},t._l(t.processTypeList,(function(t){return s("el-option",{attrs:{label:t.name,value:t.id}})})),1)],1),s("el-form-item",{attrs:{label:"审批名称"}},[s("el-input",{model:{value:t.processTemplate.name,callback:function(e){t.$set(t.processTemplate,"name",e)},expression:"processTemplate.name"}})],1),s("el-form-item",{attrs:{label:"审批图标"}},[s("el-select",{attrs:{placeholder:"请选择审批图标"},model:{value:t.processTemplate.iconUrl,callback:function(e){t.$set(t.processTemplate,"iconUrl",e)},expression:"processTemplate.iconUrl"}},t._l(t.iconUrlList,(function(t){return s("el-option",{attrs:{label:t.iconUrl,value:t.iconUrl}},[s("img",{staticStyle:{width:"30px",height:"30px","vertical-align":"text-bottom"},attrs:{src:t.iconUrl}})])})),1)],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{model:{value:t.processTemplate.description,callback:function(e){t.$set(t.processTemplate,"description",e)},expression:"processTemplate.description"}})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.stepIndex,expression:"stepIndex == 2"}],staticStyle:{"margin-top":"20px"}},[s("fc-designer",{ref:"designer",staticClass:"form-build"})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.stepIndex,expression:"stepIndex == 3"}],staticStyle:{"margin-top":"20px"}},[s("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"/admin/process/processTemplate/uploadProcessDefinition",headers:t.uploadHeaders,multiple:!1,"before-upload":t.beforeUpload,"on-success":t.onUploadSuccess,"file-list":t.fileList}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[t._v("将Activiti流程设计文件拖到此处，或"),s("em",[t._v("点击上传")])]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传zip压缩文件，且不超过2048kb")])])],1)],1)},n=[],o=(s("e9c4"),s("f1b6")),c=s("6ab0"),i=s("4360"),r={id:"",name:"",iconUrl:"",formProps:"",formOptions:"",processDefinitionKey:"",processDefinitionPath:"",description:""},p={data:function(){return{stepIndex:1,processTypeList:[],processTemplate:r,iconUrlList:[{iconUrl:"https://gw.alicdn.com/tfs/TB1t695CFYqK1RjSZLeXXbXppXa-102-102.png",tag:"请假"},{iconUrl:"https://gw.alicdn.com/tfs/TB1bHOWCSzqK1RjSZFjXXblCFXa-112-112.png",tag:"出差"},{iconUrl:"https://gw.alicdn.com/tfs/TB1cbCYCPTpK1RjSZKPXXa3UpXa-112-112.png",tag:"机票出差"},{iconUrl:"https://gw.alicdn.com/tfs/TB1cbCYCPTpK1RjSZKPXXa3UpXa-112-112.png",tag:"机票改签"},{iconUrl:"https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png",tag:"外出"},{iconUrl:"https://gw.alicdn.com/tfs/TB1Yfa0CG6qK1RjSZFmXXX0PFXa-112-112.png",tag:"补卡申请"},{iconUrl:"https://gw.alicdn.com/tfs/TB1Y8PlCNjaK1RjSZKzXXXVwXXa-112-112.png",tag:"加班"},{iconUrl:"https://gw.alicdn.com/tfs/TB11X99CNTpK1RjSZFKXXa2wXXa-102-102.png",tag:"居家隔离"},{iconUrl:"https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png",tag:"请假"},{iconUrl:"https://gw.alicdn.com/tfs/TB13ca1CMDqK1RjSZSyXXaxEVXa-102-102.png",tag:"调岗"},{iconUrl:"https://gw.alicdn.com/tfs/TB1U9iBCSzqK1RjSZPcXXbTepXa-102-102.png",tag:"离职"},{iconUrl:"https://gw.alicdn.com/tfs/TB11pS_CFzqK1RjSZSgXXcpAVXa-102-102.png",tag:"费用申请"},{iconUrl:"https://gw.alicdn.com/tfs/TB1t695CFYqK1RjSZLeXXbXppXa-102-102.png",tag:"用章申请"},{iconUrl:"https://gw.alicdn.com/tfs/TB13f_aCQzoK1RjSZFlXXai4VXa-102-102.png",tag:"携章外出"},{iconUrl:"https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png",tag:"学期内分期"},{iconUrl:"https://gw.alicdn.com/tfs/TB1_YG.COrpK1RjSZFhXXXSdXXa-102-102.png",tag:"特殊学费"},{iconUrl:"https://gw.alicdn.com/tfs/TB1Yfa0CG6qK1RjSZFmXXX0PFXa-112-112.png",tag:"充值卡申领"},{iconUrl:"https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png",tag:"礼品申领"},{iconUrl:"https://gw.alicdn.com/tfs/TB1FNG.CMHqK1RjSZFgXXa7JXXa-102-102.png",tag:"邮寄快递申请"},{iconUrl:"https://gw.alicdn.com/imgextra/i3/O1CN01LLn0YV1LhBXs7T2iO_!!6000000001330-2-tps-120-120.png",tag:"合同审批"},{iconUrl:"https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png",tag:"合同借阅"},{iconUrl:"https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png",tag:"魔点临时开门权限"},{iconUrl:"https://gw.alicdn.com/tfs/TB1bHOWCSzqK1RjSZFjXXblCFXa-112-112.png",tag:"北京科技园车证审批"},{iconUrl:"https://gw.alicdn.com/tfs/TB1e76lCOLaK1RjSZFxXXamPFXa-112-112.png",tag:"魔点访客提前预约审批"}],uploadHeaders:{token:i["a"].getters.token},fileList:[]}},created:function(){var t=this.$route.query.id;console.log(t),t>0&&this.fetchDataById(t),this.fetchProcessTypeData()},methods:{pre:function(){this.stepIndex-=1},next:function(){2===this.stepIndex&&(this.processTemplate.formProps=JSON.stringify(this.$refs.designer.getRule()),this.processTemplate.formOptions=JSON.stringify(this.$refs.designer.getOption()),console.log(JSON.stringify(this.processTemplate))),3===this.stepIndex&&this.saveOrUpdate(),this.stepIndex+=1},fetchProcessTypeData:function(){var t=this;c["a"].findAll().then((function(e){t.processTypeList=e.data}))},fetchDataById:function(t){var e=this;o["a"].getById(t).then((function(t){e.processTemplate=t.data,e.$refs.designer.setRule(JSON.parse(e.processTemplate.formProps)),e.$refs.designer.setOption(JSON.parse(e.processTemplate.formOptions)),e.fileList=[{name:e.processTemplate.processDefinitionPath,url:e.processTemplate.processDefinitionPath}]}))},saveOrUpdate:function(){this.saveBtnDisabled=!0,this.processTemplate.id?this.updateData():this.saveData()},saveData:function(){var t=this;o["a"].save(this.processTemplate).then((function(e){t.$router.push("/processSet/processTemplate")}))},updateData:function(){var t=this;o["a"].updateById(this.processTemplate).then((function(e){t.$router.push("/processSet/processTemplate")}))},beforeUpload:function(t){var e="application/x-zip-compressed"===t.type,s=t.size/1024/1024<2;return e?!!s||(this.$message.error("上传大小不能超过 2MB!"),!1):(this.$message.error("文件格式不正确!"),!1)},onUploadSuccess:function(t,e){this.processTemplate.processDefinitionPath=t.data.processDefinitionPath,this.processTemplate.processDefinitionKey=t.data.processDefinitionKey},back:function(){this.$router.push("/processSet/processTemplate")},openNewWindow:function(){var t="http://java.jcxiaozhan.top:8080/activiti-explorer";window.open(t)}}},l=p,d=s("2877"),u=Object(d["a"])(l,a,n,!1,null,null,null);e["default"]=u.exports},e9c4:function(t,e,s){var a=s("23e7"),n=s("d066"),o=s("d039"),c=n("JSON","stringify"),i=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,p=/^[\uDC00-\uDFFF]$/,l=function(t,e,s){var a=s.charAt(e-1),n=s.charAt(e+1);return r.test(t)&&!p.test(n)||p.test(t)&&!r.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},d=o((function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")}));c&&a({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,s){var a=c.apply(null,arguments);return"string"==typeof a?a.replace(i,l):a}})},f1b6:function(t,e,s){"use strict";s("99af");var a=s("b775"),n="/admin/process/processTemplate";e["a"]={getPageList:function(t,e){return Object(a["a"])({url:"".concat(n,"/").concat(t,"/").concat(e),method:"get"})},getById:function(t){return Object(a["a"])({url:"".concat(n,"/get/").concat(t),method:"get"})},save:function(t){return Object(a["a"])({url:"".concat(n,"/save"),method:"post",data:t})},updateById:function(t){return Object(a["a"])({url:"".concat(n,"/update"),method:"put",data:t})},removeById:function(t){return Object(a["a"])({url:"".concat(n,"/remove/").concat(t),method:"delete"})},publish:function(t){return Object(a["a"])({url:"".concat(n,"/publish/").concat(t),method:"get"})}}}}]);