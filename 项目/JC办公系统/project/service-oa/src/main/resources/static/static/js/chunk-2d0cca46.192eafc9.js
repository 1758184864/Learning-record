(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cca46"],{"4f97":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"tools-div"},[n("el-button",{staticClass:"btn-add",attrs:{type:"success",icon:"el-icon-plus",size:"mini",disabled:!1===e.$hasBP("bnt.menu.add")},on:{click:e.add}},[e._v("添 加")]),n("el-button",{staticClass:"btn-add",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",disabled:!1===e.$hasBP("bnt.menu.syncMenu")},on:{click:e.syncMenu}},[e._v("同步菜单")]),n("el-button",{staticClass:"btn-add",attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:!1===e.$hasBP("bnt.menu.removeMenu")},on:{click:e.removeMenu}},[e._v("删除菜单")])],1),n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.list,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children"}}},[n("el-table-column",{attrs:{label:"名称",prop:"name",width:"350"}}),n("el-table-column",{attrs:{label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("view"==t.row.type?"链接":"click"==t.row.type?"事件":"")+" ")]}}])}),n("el-table-column",{attrs:{label:"菜单URL",prop:"url"}}),n("el-table-column",{attrs:{label:"菜单KEY",prop:"meunKey",width:"130"}}),n("el-table-column",{attrs:{label:"排序号",prop:"sort",width:"70"}}),n("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.parentId>0?n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",disabled:!1===e.$hasBP("bnt.menu.update")},on:{click:function(n){return e.edit(t.row.id)}}}):e._e(),t.row.parentId>0?n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:!1===e.$hasBP("bnt.menu.remove")},on:{click:function(n){return e.removeDataById(t.row.id)}}}):e._e()]}}])})],1),n("el-dialog",{attrs:{title:"添加/修改",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"flashPromotionForm",staticStyle:{"padding-right":"40px"},attrs:{"label-width":"150px",size:"small"}},[n("el-form-item",{attrs:{label:"选择一级菜单"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.menu.parentId,callback:function(t){e.$set(e.menu,"parentId",t)},expression:"menu.parentId"}},e._l(e.list,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"菜单名称"}},[n("el-input",{model:{value:e.menu.name,callback:function(t){e.$set(e.menu,"name",t)},expression:"menu.name"}})],1),n("el-form-item",{attrs:{label:"菜单类型"}},[n("el-radio-group",{model:{value:e.menu.type,callback:function(t){e.$set(e.menu,"type",t)},expression:"menu.type"}},[n("el-radio",{attrs:{label:"view"}},[e._v("链接")]),n("el-radio",{attrs:{label:"click"}},[e._v("事件")])],1)],1),"view"==e.menu.type?n("el-form-item",{attrs:{label:"链接"}},[n("el-input",{model:{value:e.menu.url,callback:function(t){e.$set(e.menu,"url",t)},expression:"menu.url"}})],1):e._e(),"click"==e.menu.type?n("el-form-item",{attrs:{label:"菜单KEY"}},[n("el-input",{model:{value:e.menu.meunKey,callback:function(t){e.$set(e.menu,"meunKey",t)},expression:"menu.meunKey"}})],1):e._e(),n("el-form-item",{attrs:{label:"排序"}},[n("el-input",{model:{value:e.menu.sort,callback:function(t){e.$set(e.menu,"sort",t)},expression:"menu.sort"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v("确 定")])],1)],1)],1)},i=[],l=n("b775"),s="/admin/wechat/menu",o={findMenuInfo:function(){return Object(l["a"])({url:"".concat(s,"/findMenuInfo"),method:"get"})},save:function(e){return Object(l["a"])({url:"".concat(s,"/save"),method:"post",data:e})},getById:function(e){return Object(l["a"])({url:"".concat(s,"/get/").concat(e),method:"get"})},updateById:function(e){return Object(l["a"])({url:"".concat(s,"/update"),method:"put",data:e})},removeById:function(e){return Object(l["a"])({url:"".concat(s,"/remove/").concat(e),method:"delete"})},syncMenu:function(){return Object(l["a"])({url:"".concat(s,"/syncMenu"),method:"get"})},removeMenu:function(){return Object(l["a"])({url:"".concat(s,"/removeMenu"),method:"delete"})}},c={id:null,parentId:1,name:"",nameId:null,sort:1,type:"view",meunKey:"",url:""},u={data:function(){return{list:[],dialogVisible:!1,menu:c,saveBtnDisabled:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;console.log("加载列表"),o.findMenuInfo().then((function(t){e.list=t.data,console.log(e.list)}))},removeDataById:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return o.removeById(e)})).then((function(e){t.fetchData(t.page),t.$message.success(e.message||"删除成功")})).catch((function(){t.$message.info("取消删除")}))},add:function(){this.dialogVisible=!0,this.menu=Object.assign({},c)},edit:function(e){this.dialogVisible=!0,this.fetchDataById(e)},fetchDataById:function(e){var t=this;o.getById(e).then((function(e){t.menu=e.data}))},saveOrUpdate:function(){this.saveBtnDisabled=!0,this.menu.id?this.updateData():this.saveData()},saveData:function(){var e=this;o.save(this.menu).then((function(t){e.$message.success(t.message||"操作成功"),e.dialogVisible=!1,e.fetchData(e.page)}))},updateData:function(){var e=this;o.updateById(this.menu).then((function(t){e.$message.success(t.message||"操作成功"),e.dialogVisible=!1,e.fetchData(e.page)}))},syncMenu:function(){var e=this;this.$confirm("你确定上传菜单吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return o.syncMenu()})).then((function(t){e.$message.success(t.message)})).catch((function(t){console.log("error",t),"cancel"===t&&e.$message.info("取消上传")}))},removeMenu:function(){var e=this;o.removeMenu().then((function(t){e.$message.success("菜单已删除")}))}}},r=u,d=n("2877"),m=Object(d["a"])(r,a,i,!1,null,null,null);t["default"]=m.exports}}]);