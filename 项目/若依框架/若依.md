## 什么是若依

> 一个开源的后台管理项目

官网：http://www.ruoyi.vip/

文档：http://doc.ruoyi.vip/

## 配置启动若依

### 后端配置

1. 下载源码
2. 创建数据库，执行sql
3. 设置项目 JDK 为1.8
4. 修改配置文件`application-druid.yml`中的数据库配置
5. 开启本地redis服务，如果是远程的，需要在`application.yml`文件中配置redis的地址

如果遇到启动时提示 JDK 版本低，有不兼容语法，在顶层pom文件中加入如下配置

```xml
 <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
  </properties>
```

### 前端配置

1. 安装依赖

```bash
npm insttall
```

2. 启动

```bash
npm run dev
```

## 登录

### 生成验证码

#### 流程思路

- 后端生成一个表达式`1+1=?@2 `
- 1+1=? 转成图片，传到前端进行展示
- 2 存入 Reids

#### 获取验证图片

前端请求后端获取图片的接口：http://localhost/dev-api/captchaImage

这里请求后端接口用到了反向代理，解决跨域问题，在vue的配置文件里面可以看到

![反向代理](D:\Study\Learning-record\项目\若依框架\反向代理.jpg)

```
/dev-api 替换成'' 再映射到后端地址：http://localhost:8080
最后替换之后的请求地址为：http://localhost:8080/captchaImage
```

### 登录流程

1、校验验证码

2、校验用户名和密码

3、生成Token

使用异步任务管理器，结合线程池，实现了异步的操作日志记录，和业务逻辑，实现异步解耦合。