## 面向对象设计原则

> 在进行软件开发时，不仅需要将基本的业务完成，还要考虑整个项目的==可维护性==和==可复用性==。
>
> 因此在编写代码时，应该尽可能的规范，不然随着项目的不断扩大，整体结构只会越来越遭。
>
> 为了避免这种情况的发生，应该尽量遵守==面向对象设计原则==。

1. **单一职责原则：**一个对象应该只包含单一的职责，并且该职责被完整地封装在一个类中。==(类的划分要明确，专门的类做专门的事，不能所有的东西都写在一个类中)==
2. **开闭原则：**软件实体应当对扩展开放，对修改关闭。==（一个接口的具体实现最好的交由调用者，这样可以针对不同的业务扩展出不同的实现，灵活多变）==
3. **里式替换原则：**所有引用基类的地方必须能透明地使用其子类的对象。==（子类继承，不对父类方法进行重写，因为重写会覆盖父类方法，子类可以扩展自己的方法）==
4. **依赖倒转原则：**高层模块不应依赖于底层模块，它们都应该依赖抽象。抽象不应依赖于细节，细节应该依赖于抽象。==（spring的思想：解耦，将接口和实现类分离，便于业务变更和扩展）==
5. **接口隔离原则：**客户端不应依赖那些它不需要的接口。==（将接口细化，在继承接口时尽量不要出现此类不需要的方法）==
6. **合成复用原则：**优先使用对象组合，而不是通过继承来达到复用的目的。==（在使用它类对象方法时，尽量使用调用，而不是继承，继承的耦合性太高）==
7. **迪米特法则：**每一个软件单位对其他单位都只有最少的知识，而且局限于那些与本单位密切相关的软件单位。==（在传参时，尽量避免过程冗余，比如能使用string的，就不要使用user.getName()）==

## 设计模式分类

![设计模式分类](D:\Study\Learning-record\设计模式\设计模式分类.png)

## 单例模式

> 什么是单例模式

1. 构造方法私有化，创建唯一实例
2. 静态属性指向实例
3. 提供静态方法，返回静态属性

> 单例模式特点

1. 单例类只能有一个实例
2. 单例类必须自己创建自己的唯一实例
3. 单例类必须给其他类提供获取实例的方法

### 饿汉式

在类创建的同时就已经创建好一个静态的对象供系统使用，以后不再改变，所以天生是线程安全的

如果在构造方法里写了性能消耗较大，耗时较久的代码，比如建立与数据库的连接，那么就会在启动的时候感觉稍微有些卡顿

```java
//饿汉式单例
public class Test {
    private Test() {
        
    }
    
    private final static Test TEST = new Test();
    
    public static Test getInstance() {
        return TEST;
    }
}
```

### DCL懒汉式

在调用getInstance时才创建实例对象

使用懒汉式，在启动的时候，会感觉到比饿汉式略快，因为并没有做对象的实例化。 但是在第一次调用的时候，会进行实例化操作，感觉上就略慢。

```java
//DCL懒汉式单例
public class Test {

    private Test() {

    }

    //volatile关键字 1.保证变量的内存可见性 2.不保证原子性 3.禁止指令重排序
    private volatile static Test test = null;

    //双重检测锁机制
    public static Test getInstance() {
        //第一次判断，实例为空，就有获取锁的资格
        if (test == null) {
            //锁住类，保证同一时间只能有一条线程进行操作
            synchronized (Test.class) {
                if (test == null) {
                   test = new Test();
                }
            }
        }
        return test;
    }
}
```

前面的写法尽管已经考虑得很完善，但还是忽略了**反射**。反射可以直接获取类，调用`newInstance`来生成对象实例

枚举类本质上也是一个类，在类的基础上进行了一些约束，**反射**无法破坏枚举类，所以我们使用枚举类来实现单例

```java
public enum Singleton {
    /**
     * 单例对象
     */
    INSTANCE
}
```

## 工厂模式

### 简单工厂模式

### 工厂方法模式

### 